@model JasperSiteCore.Areas.Admin.ViewModels.EditBlockViewModel
@{
    ViewData["Title"] = "Úprava textového bloku";
}
@section Scripts {

    <script src="~/Areas/Admin/Content/Scripts/SavedInfoPanel.js"></script>

    @{ Html.RenderPartial("TinyMceSettingsPartialView");}

    @*@{ Html.RenderPartial("TinyMceSettingsPartialView");}*@

    <script>
        $(document).ready(function () {


            $('[data-toggle="tooltip"]').tooltip();


        });
    </script>

    <script>
        /* AJAX TINYMCE SUBMIT WITH NO JS FALLBACK */
        $(document).ready(function () {

            var allDeleteLinks = $('#btnSaveTinymce').click(function (e) {

                e.preventDefault();

               // var formData = $("#tinymceForm").serialize();
                var textarea = tinyMCE.activeEditor.getContent();
                var model = {
                    Id: $("#hiddenId").val(),
                    Name: $("#tbName").val(),
                    Content: textarea

                };

                $.ajax({
                    type: 'post',
                    url: '@Url.Action("SaveBlock","Blocks")',
                    data: model,
                    dataType: 'HTML',
                    success: function (data) {

                        $("#modelNameHeader").text(data);
                        savedInfo();
                    }
                });
            });

        });
    </script>

    <script>
        /* AJAX REMOVE HOLDER */
        $(document).ready(function () {


            var allDeleteLinks = $('a[data-remove-holder-id]').click(function (e) {

                e.preventDefault();
                var singleLink = $(this);

                var holderToBeRemovedId = singleLink.data('removeHolderId');
                var tbToBeRemovedId = @Model.HolderManagement.CurrentTextBoxId;

                $.ajax({
                    type: 'get',
                    url: '@Url.Action("RemoveHolderFromBlock","Blocks")',
                    data: { holderId: holderToBeRemovedId, blockId:tbToBeRemovedId },
                    dataType: 'HTML',
                    success: function (data) {
                        alert('odebrano');
                        $("#mainForm2").html(data);
                    }
                });
            });
        });
    </script>
}

@section Styles {

    <link href="~/node_modules/jquery-ui-dist/jquery-ui.min.css" rel="stylesheet" />

}



    <div class="container-fluid">


        <div id="mainForm">
            @Html.Partial("EditTextBlockPartialView",Model.TextBlock)
        </div>

        <div id="mainForm2">
            @Html.Partial("AddedAndLooseHoldersPartialView",Model.HolderManagement)
        </div>

    </div>