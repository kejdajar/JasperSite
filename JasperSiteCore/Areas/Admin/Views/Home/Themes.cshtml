@using JasperSiteCore.Models
@using JasperSiteCore.Areas.Admin.Models
@model JasperSiteCore.Areas.Admin.ViewModels.ThemesViewModel
@{
    ViewBag.Title = "Vzhledy";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<script>

    $(document).ready(function () {
        @if (Model.ErrorFlag == "true")
        {
            @:$('#myErrorModal').modal('show');
        }
        else if (Model.ErrorFlag == "false")
        {
              @:$('#mySuccessModal').modal('show');
        }
        else
        {
            // do nothing
        }
    });
</script>

<div id="vzhledy"></div>

<div class="jumbotron"><h1><i class="fa fa-diamond j-icon" aria-hidden="true"></i> Vzhledy</h1></div>



<h2> <i class="fa fa-info-circle j-icon" aria-hidden="true"></i> Nainstalované vzhledy </h2>
        Složka se vzhledy: @Model.ThemeFolder <br />
        Právě aktivní vzhled: @Model.SelectedThemeName <br />

    <div class="alert alert-info alert-dismissible fade show" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <strong>Inteligetní změna vzhledu</strong> <br/>
        Redakční systém obsahuje algoritmus pro inteligentní změnu vzhledu. Pokud nově aktivovaný
        vzhled obsahuje stejně pojmenované kontejnery, tak se textové bloky automaticky nakonfigurují.
    </div>



        <div id="mainForm1">
            @Html.Partial("ThemesPartialView", Model)
        </div>







        <br />
        <h2> <i class="fa fa-info-circle j-icon" aria-hidden="true"></i> Vlastní rozšíření </h2>
        <p>JasperSiteCore je možné rozšiřovat o vlastní vzhledy. Návod pro tvorbu vlastního vzhledu nalezente v dokumentaci.</p>

        <form enctype="multipart/form-data" asp-controller="Home" asp-action="UploadTheme" asp-area="Admin">
            <div class="form-group">
                <label for="files">Nahrání vzhledu</label>
                <input type="file" class="form-control-file" id="files" name="files" aria-describedby="fileHelp" multiple>
                <small id="fileHelp" class="form-text text-muted"> Vzhled je potřeba nahrát v se formátu .zip</small>

                @*<a class="btn btn-jasper" asp-controller="Home" asp-action="UploadTheme" asp-area="Admin">Nahrát nový vzhled</a>*@

                <input type="submit" value="Odeslat data" />
            </div>
        </form>


        <hr />
        <div>
            <p>Pokud jste manuálně modifikovali vzhledy na serveru, je potřeba tyto změny potvrdit pomocí následující volby:</p>
            <a class="btn btn-jasper" asp-controller="Home" asp-action="UpdateConfiguration" asp-area="Admin">Aplikovat data z konfiguračních souborů</a>
        </div>
       
        <div>            
            <a class="btn btn-jasper" asp-controller="Home" asp-action="ReconstructAllThemesCorrespondingDatabaseTables" asp-area="Admin">Rekonstrukce databáze</a>
        </div>


        <hr />


        <!-- Error Modal -->
        <div id="myErrorModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" style="margin-left:20px">Chyba</h4>
                    </div>
                    <div class="modal-body">
                        Při operaci došlo k chybě. <span id="themeNameModal"></span>
                    </div>
                    <div class="modal-footer">

                        <button type="button" class="btn btn-jasper" data-dismiss="modal" title="Zrušit">Zavřít</button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Success Modal -->
        <div id="mySuccessModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" style="margin-left:20px">Úspěch</h4>
                    </div>
                    <div class="modal-body">
                        Operace byla provedena úspěšně. <span id="themeNameModal"></span>
                    </div>
                    <div class="modal-footer">

                        <button type="button" class="btn btn-jasper" data-dismiss="modal" title="Zrušit">Zavřít</button>
                    </div>
                </div>

            </div>
        </div>